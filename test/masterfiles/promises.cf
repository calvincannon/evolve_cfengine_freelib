body common control
{
	bundlesequence => { "main", };
   inputs => { "@{cfengine_stdlib.inputs}",
      "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/EFL/evolve_freelib.cf",
      "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/EFL/efl_common.cf"
   };
}

bundle common cfengine_stdlib
{
  vars:
      "inputs" slist => {
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/paths.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/common.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/commands.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/packages.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/files.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/services.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/processes.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/storage.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/databases.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/monitor.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/guest_environments.cf",
           "lib/$(sys.cf_version_major).$(sys.cf_version_minor)/bundles.cf",
      };
}

bundle agent main
{
   vars:
      "localhost"
         comment => "Used for server arg in copy_from attributes of EFL",
         slist   => { 'localhost' };

	methods:

      "efl init" usebundle => efl_c;

   001_efl_test::
		"any" usebundle => efl_main( "../001/efl_main.csv" );
   002_efl_test::
		"any" usebundle => efl_main( "../002/efl_main.json" );
   003_efl_test::
		"any" usebundle => efl_main( "../003/efl_main.csv" );
   004_efl_test::
		"any" usebundle => efl_main( "../004/efl_main.json" );
   005_efl_test::
		"any" usebundle => efl_main( "../005/efl_main.csv" );
   006_efl_test::
		"any" usebundle => efl_main( "../006/efl_main.json" );
   007_efl_test::
		"any" usebundle => efl_main( "../007/efl_main.csv" );
   008_efl_test::
		"any" usebundle => efl_main( "../008/efl_main.json" );
   009_efl_test::
		"any" usebundle => efl_main( "../009/efl_main.csv" );
   010_efl_test::
		"any" usebundle => efl_main( "../010/efl_main.json" );
   011_efl_test::
		"any" usebundle => efl_main( "../011/efl_main.csv" );
   012_efl_test::
		"any" usebundle => efl_main( "../012/efl_main.json" );
   013_efl_test::
		"any" usebundle => efl_main( "../013/efl_main.csv" );
   014_efl_test::
		"any" usebundle => efl_main( "../014/efl_main.json" );
   015_efl_test::
		"any" usebundle => efl_main( "../015/efl_main.csv" );
   016_efl_test::
		"any" usebundle => efl_main( "../016/efl_main.json" );
   017_efl_test::
		"any" usebundle => efl_main( "../017/efl_main.json" );
   018_efl_test::
		"any" usebundle => efl_main( "../018/efl_main.json" );
   019_efl_test::
      "any" usebundle => efl_sysctl_live( "../019/01_efl_sysctl_live.csv" );
   020_efl_test::
      "any" usebundle => efl_sysctl_live( "../020/01_efl_sysctl_live.json" );
   021_efl_test::
      "any" usebundle => efl_sysctl_conf_file( "../021/01_efl_sysctl_conf_file.csv" );
   022_efl_test::
      "any" usebundle => efl_sysctl_conf_file( "../022/01_efl_sysctl_conf_file.json" );
   023_efl_test::
      "any" usebundle => efl_command( "../023/01_efl_command.csv" );
   024_efl_test::
      "any" usebundle => efl_command( "../024/01_efl_command.json" );
   025_efl_test::
      "any" usebundle => efl_link( "../025/01_efl_link.csv" );
   026_efl_test::
      "any" usebundle => efl_link( "../026/01_efl_link.json" );
   027_efl_test::
      "any" usebundle => efl_delete_files( "../027/01_efl_delete_files.csv" );
   028_efl_test::
      "any" usebundle => efl_delete_files( "../028/01_efl_delete_files.json" );
   029_efl_test::
      "any" usebundle => efl_copy_files( "../029/01_efl_copy_files.csv" );
   030_efl_test::
      "any" usebundle => efl_copy_files( "../030/01_efl_copy_files.json" );
   031_efl_test::
      "any" usebundle => efl_packages_via_cmd( "../031/01_packages.csv" );
   032_efl_test::
      "any" usebundle => efl_packages_via_cmd( "../032/01_packages.json" );
   033_efl_test::
      "any" usebundle => efl_packages( "../031/01_packages.csv" );
   034_efl_test::
      "any" usebundle => efl_packages( "../032/01_packages.json" );
   035_efl_test::
      "any" usebundle => efl_start_service( "../035/01_efl_start_service.csv" );
   036_efl_test::
      "any" usebundle => efl_start_service( "../036/01_efl_start_service.json" );
   037_efl_test::
      "any" usebundle => efl_service_recurse( "../037/01_efl_service_recurse.csv" );
   039_efl_test::
      "any" usebundle => efl_service_recurse( "../039/01_efl_service_recurse.json" );
   250_efl_test::
      "any" usebundle => efl_main( "../250/efl_main.json" );
   251_efl_test::
      "any" usebundle => efl_main( "../251/efl_main.json" );
   260_efl_test::
      "any" usebundle => efl_service( "../260/01_efl_service.csv" );
   264_efl_test::
      "any" usebundle => efl_service( "../264/01_efl_service.json" );
   270_efl_test::
      "any" usebundle => efl_enable_service( "../270/01_efl_enable_service.csv" );
   271_efl_test::
      "any" usebundle => efl_enable_service( "../271/01_efl_enable_service.json" );
   272_efl_test::
      "any" usebundle => efl_disable_service( "../270/01_efl_enable_service.csv" );
   273_efl_test::
      "any" usebundle => efl_disable_service( "../271/01_efl_enable_service.json" );
   280_efl_test::
      "any" usebundle => efl_file_perms( "../280/01_efl_file_perms.csv" );
   281_efl_test::
      "any" usebundle => efl_file_perms( "../281/01_efl_file_perms.json" );

   reports:
      005_efl_test|006_efl_test::
         "efl_global_lists.ntp_servers  => [${efl_global_slists.ntp_servers}]";
         "efl_global_lists.name_servers => [${efl_global_slists.name_servers}]";
         "efl_global_lists.web_servers  => [${efl_global_slists.web_servers}]";
}
